var D=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var i=(s,t,e)=>(D(s,t,"read from private field"),e?e.call(s):t.get(s)),h=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},l=(s,t,e,o)=>(D(s,t,"write to private field"),o?o.call(s,e):t.set(s,e),e),q=(s,t,e,o)=>({set _(n){l(s,t,n,e)},get _(){return i(s,t,o)}});const y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}};y();class N extends CustomEvent{constructor(t){super("sort",{detail:[...t]})}}class M extends EventTarget{emitSort(t){this.dispatchEvent(new N(t))}}class A extends M{sort(t){let e=!1;for(let o=0;o<t.length;o++){e=!1;for(let n=0;n<t.length-1;n++)if(t[n]>t[n+1]){let r=t[n+1];t[n+1]=t[n],t[n]=r,e=!0,this.emitSort(t)}if(!e)return t}return t}}class P extends M{sort(t){for(let e=1;e<t.length;e++){let o=e;for(;t[o]<t[o-1];){let n=t[o];t[o]=t[o-1],t[o-1]=n,this.emitSort(t),o--}}return t}}function R(s){return new Promise(t=>setTimeout(t,s))}function E(s,t=0,e=1){return Array.from({length:s}).map(()=>{const o=Math.floor(Math.random()*e);return Math.max(t,Math.min(o,e))})}var f,p;const S=class{static get data(){return i(this,p)}static get opsCount(){return i(this,f)}static incrementOpsCount(){return q(this,f)._++}static regenerateData(){l(this,p,E(100,0,100))}static renderStats(){const t=document.querySelector("#size"),e=document.querySelector("#ops");t.textContent=`${S.data.length}`,e.textContent=`${S.opsCount}`}static resetStats(){l(this,f,0),l(this,p,E(100,0,100)),this.renderStats()}};let c=S;f=new WeakMap,p=new WeakMap,h(c,f,0),h(c,p,E(100,0,100));var a,u,v;class ${constructor(t){h(this,a,void 0);h(this,u,void 0);h(this,v,10);l(this,a,t),l(this,u,t.getContext("2d"))}clear(){i(this,u).clearRect(0,0,i(this,a).width,i(this,a).height)}drawData(t){var n;this.clear(),i(this,u).fillStyle=(n=window.getComputedStyle(i(this,a)).color)!=null?n:"red";const e=i(this,a).width/t.length;let o=0;for(const r of t){const d=i(this,a).height*(r/100),O=i(this,a).height-d;i(this,u).fillRect(o,O,e,d),o+=e}}async updateCanvas(t){for(const e of t)console.debug("drawing"),this.drawData(e),c.incrementOpsCount(),c.renderStats(),await R(i(this,v));console.log("done"),this.drawData(c.data)}}a=new WeakMap,u=new WeakMap,v=new WeakMap;class j{constructor(t=[]){this.queue=t}[Symbol.iterator](){return this}next(){const t=this.queue.shift(),e=!this.queue.length;return{value:t,done:e}}append(t){this.queue.push(t)}}const z=document.querySelector("#canvas"),I=document.querySelector("#reset-button"),C=document.querySelector("#sort-button"),m=document.querySelector("#algorithm-select"),b=new $(z),L=new j;let w=!1;const g=new Map;g.set("bubble",new A);g.set("insertion",new P);let x=g.get("bubble");g.forEach((s,t)=>{const e=document.createElement("option");e.value=t,e.textContent=`${t} sort`,m==null||m.append(e)});m.addEventListener("change",()=>{x=g.get(m.value),w||(c.resetStats(),b.drawData(c.data))});b.drawData(c.data);c.renderStats();C==null||C.addEventListener("click",()=>{if(w)return;x.addEventListener("sort",t=>{const e=t.detail;L.append(e)}),w=!0;const s=x.sort(c.data);console.log(s),b.updateCanvas(L).then(()=>{w=!1})});I.addEventListener("click",s=>{c.resetStats(),b.drawData(c.data)});

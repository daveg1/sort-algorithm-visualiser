var x=Object.defineProperty;var b=(o,t,e)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var a=(o,t,e)=>(b(o,typeof t!="symbol"?t+"":t,e),e);const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}};E();function q(o,t=0,e=1){return Array.from({length:o}).map(()=>{const s=Math.floor(Math.random()*e);return Math.max(t,Math.min(s,e))})}function C(o,t){return Math.floor(t*(o/100))}function L(o){return new Promise(t=>setTimeout(t,o))}class D{constructor(t){a(this,"canvas");a(this,"ctx");this.canvas=t,this.canvas.width=750,this.canvas.height=500,this.ctx=t.getContext("2d")}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawData(t){var n;this.clear(),this.ctx.fillStyle=(n=window.getComputedStyle(this.canvas).color)!=null?n:"red";const e=this.canvas.width/t.length;let s=0;for(const r of t){const c=C(r,this.canvas.height),S=this.canvas.height-c;this.ctx.fillRect(s,S,e,c),s+=e}}}class M{constructor(t=[]){this.queue=t}[Symbol.iterator](){return this}next(){const t=this.queue.shift(),e=!this.queue.length;return{value:t,done:e}}append(t){this.queue.push(t)}}class A extends CustomEvent{constructor(t){super("sort",{detail:[...t]})}}class p extends EventTarget{emitSort(t){this.dispatchEvent(new A(t))}}class y extends p{sort(t){let e=!1;for(let s=0;s<t.length;s++){e=!1;for(let n=0;n<t.length-1;n++)if(t[n]>t[n+1]){let r=t[n+1];t[n+1]=t[n],t[n]=r,e=!0,this.emitSort(t)}if(!e)return t}return t}}class O extends p{sort(t){for(let e=1;e<t.length;e++){let s=e;for(;t[s]<t[s-1];){let n=t[s];t[s]=t[s-1],t[s-1]=n,this.emitSort(t),s--}}return t}}const N=document.querySelector("#canvas"),d=document.querySelector("#sort-button"),i=document.querySelector("#algorithm-select"),f=new D(N),g=new M,P=10,l=new Map;l.set("bubble",new y);l.set("insertion",new O);let m=l.get("bubble");l.forEach((o,t)=>{const e=document.createElement("option");e.value=t,e.textContent=`${t} sort`,i==null||i.append(e)});i.addEventListener("change",o=>{m=l.get(i.value)});const u=q(100,0,100);let v=0;f.drawData(u);w();async function j(){for(const o of g)console.debug("drawing"),f.drawData(o),v++,w(),await L(P);console.log("done"),f.drawData(u)}function w(){const o=document.querySelector("#size"),t=document.querySelector("#ops");o.textContent=String(u.length),t.textContent=String(v)}let h=!1;d==null||d.addEventListener("click",o=>{if(h)return;m.addEventListener("sort",e=>{const s=e.detail;g.append(s)}),h=!0;const t=m.sort(u);console.log(t),j().then(()=>{h=!1})});
